/* APS Dream Home - Optimized JS Bundle
 * Generated: 2025-10-26 13:42:10
 */

/* Source: /assets/js/main.js */
import '../css/main.css'; import { initPropertyFilters } from './filters'; import { initImageGallery } from './gallery'; import { initPropertySearch } from './search'; const APSDreamHome = { config: { }, init() { this.initTooltips(); this.initBackToTop(); this.initCounters(); this.initLazyLoading(); this.initEventListeners(); this.initServiceWorker(); this.initImageErrorHandling(); this.initScheduleVisitModal(); this.initPropertySearch(); }, initPropertySearch() { import('./search').then(({ initPropertySearch }) => { initPropertySearch(); }); }, initTooltips() { if (typeof bootstrap === 'undefined' || !bootstrap.Tooltip) { console.warn('Bootstrap Tooltip not available'); return; } const tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]')); tooltipTriggerList.map(tooltipEl => new bootstrap.Tooltip(tooltipEl, { trigger: 'hover focus' })); }, initBackToTop() { const backToTop = document.querySelector('.back-to-top'); if (!backToTop) return; const toggleBackToTop = () => { backToTop.classList.toggle('active', window.scrollY > 300); }; window.addEventListener('scroll', toggleBackToTop); toggleBackToTop(); backToTop.addEventListener('click', (e) => { e.preventDefault(); window.scrollTo({ top: 0, behavior: 'smooth' }); }); }, initCounters() { const counters = document.querySelectorAll('.counter'); if (!counters.length) return; const options = { threshold: 0.5, rootMargin: '0px 0px -50px 0px' }; const observer = new IntersectionObserver((entries) => { entries.forEach(entry => { if (entry.isIntersecting) { const counter = entry.target; const target = +counter.getAttribute('data-target'); const count = +counter.innerText; const increment = target / 100; const updateCounter = () => { if (count < target) { counter.innerText = Math.ceil(count + increment); setTimeout(updateCounter, 20); } else { counter.innerText = target.toLocaleString(); } }; updateCounter(); observer.unobserve(counter); } }); }, options); counters.forEach(counter => observer.observe(counter)); }, initLazyLoading() { if (!('IntersectionObserver' in window)) return; const lazyLoad = (target) => { const io = new IntersectionObserver((entries, observer) => { entries.forEach(entry => { if (entry.isIntersecting) { const img = entry.target; img.src = img.dataset.src; if (img.dataset.srcset) img.srcset = img.dataset.srcset; img.removeAttribute('data-src'); img.removeAttribute('data-srcset'); observer.unobserve(img); } }); }); io.observe(target); }; const lazyImages = document.querySelectorAll('img[data-src]'); lazyImages.forEach(lazyLoad); }, initEventListeners() { document.addEventListener('click', (e) => { const button = e.target.closest('.btn-loading'); if (button) { button.innerHTML = '<span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>Loading...'; button.disabled = true; } const favButton = e.target.closest('.add-to-favorites'); if (favButton) { e.preventDefault(); this.toggleFavorite(favButton); } }); }, toggleFavorite(button) { const propertyId = button.dataset.propertyId; const icon = button.querySelector('i'); if (icon.classList.contains('far')) { icon.classList.replace('far', 'fas'); icon.classList.add('text-danger'); this.showToast('Added to favorites!', 'success'); } else { icon.classList.replace('fas', 'far'); icon.classList.remove('text-danger'); this.showToast('Removed from favorites', 'info'); } }, initServiceWorker() { if ('serviceWorker' in navigator) { window.addEventListener('load', () => { navigator.serviceWorker.register('/sw.js') .then(registration => { console.log('ServiceWorker registration successful with scope: ', registration.scope); }) .catch(error => { console.error('ServiceWorker registration failed: ', error); }); }); } }, initImageErrorHandling() { document.addEventListener('error', (e) => { if (e.target.tagName.toLowerCase() === 'img') { e.target.src = 'data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%22300%22%20height%3D%22200%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Crect%20width%3D%22300%22%20height%3D%22200%22%20fill%3D%22%23f8f9fa%22%2F%3E%3Ctext%20x%3D%22150%22%20y%3D%22100%22%20font-family%3D%22Arial%2C%20sans-serif%22%20font-size%3D%2214%22%20text-anchor%3D%22middle%22%20dominant-baseline%3D%22middle%22%20fill%3D%22%236c757d%22%3EImage%20not%20found%3C%2Ftext%3E%3C%2Fsvg%3E'; e.target.alt = 'Image not available'; } }, true); }, initScheduleVisitModal() { const modal = document.getElementById('scheduleVisitModal'); if (!modal) return; modal.addEventListener('show.bs.modal', (event) => { const button = event.relatedTarget; const propertyId = button.getAttribute('data-property-id'); const propertyTitle = button.getAttribute('data-property-title'); const modalTitle = modal.querySelector('.modal-title'); const propertyIdInput = modal.querySelector('input[name="property_id"]'); if (modalTitle) modalTitle.textContent = `Schedule Visit - ${propertyTitle}`; if (propertyIdInput) propertyIdInput.value = propertyId; const today = new Date(); const tomorrow = new Date(today); tomorrow.setDate(tomorrow.getDate() + 1); const minDate = tomorrow.toISOString().split('T')[0]; const dateInput = modal.querySelector('#visitDate'); if (dateInput) { dateInput.min = minDate; dateInput.value = minDate; } }); const submitButton = document.getElementById('submitVisit'); if (submitButton) { submitButton.addEventListener('click', () => this.handleVisitForm(modal)); } }, handleVisitForm(modal) { const form = document.getElementById('visitForm'); if (!form) return; if (form.checkValidity()) { const formData = new FormData(form); console.log('Form submitted:', Object.fromEntries(formData)); this.showToast('Visit scheduled successfully!', 'success'); if (typeof bootstrap !== 'undefined' && bootstrap.Modal) { const modalInstance = bootstrap.Modal.getInstance(modal); if (modalInstance) modalInstance.hide(); } else { modal.style.display = 'none'; document.body.classList.remove('modal-open'); const backdrop = document.querySelector('.modal-backdrop'); if (backdrop) backdrop.remove(); } form.reset(); } else { form.reportValidity(); } }, showToast(message, type = 'info') { let toastContainer = document.getElementById('toast-container'); if (!toastContainer) { toastContainer = document.createElement('div'); toastContainer.id = 'toast-container'; toastContainer.className = 'toast-container position-fixed bottom-0 end-0 p-3'; document.body.appendChild(toastContainer); } const toast = document.createElement('div'); toast.className = `toast align-items-center text-white bg-${type} border-0`; toast.setAttribute('role', 'alert'); toast.setAttribute('aria-live', 'assertive'); toast.setAttribute('aria-atomic', 'true'); toast.innerHTML = ` <div class="d-flex"> <div class="toast-body">${message}</div> <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button> </div> `; toastContainer.appendChild(toast); if (typeof bootstrap !== 'undefined' && bootstrap.Toast) { const bsToast = new bootstrap.Toast(toast); bsToast.show(); } else { toast.style.display = 'block'; setTimeout(() => { toast.style.opacity = '1'; }, 100); } const hideToast = () => { if (toast.parentNode) { toast.parentNode.removeChild(toast); } }; toast.addEventListener('hidden.bs.toast', hideToast); setTimeout(hideToast, 5000); } }; document.addEventListener('DOMContentLoaded', () => { APSDreamHome.init(); initPropertyFilters(); initImageGallery(); if (typeof AOS !== 'undefined') { AOS.init({ duration: 800, easing: 'ease-in-out', once: true }); } }); window.APSDreamHome = APSDreamHome;

/* Source: /assets/js/custom.js */
document.addEventListener('DOMContentLoaded', function() { if (typeof AOS !== 'undefined') { AOS.init({ duration: 800, easing: 'ease-in-out', once: true, mirror: false }); } if (typeof LazyLoad !== 'undefined') { new LazyLoad({ elements_selector: '.lazy', threshold: 100, callback_loaded: (img) => { img.classList.add('loaded'); } }); } const tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]')); tooltipTriggerList.map(function (tooltipTriggerEl) { return new bootstrap.Tooltip(tooltipTriggerEl); }); document.querySelectorAll('a[href^="#"]').forEach(anchor => { anchor.addEventListener('click', function (e) { e.preventDefault(); const targetId = this.getAttribute('href'); if (targetId === '#') return; const targetElement = document.querySelector(targetId); if (targetElement) { window.scrollTo({ top: targetElement.offsetTop - 80, behavior: 'smooth' }); } }); }); const header = document.querySelector('.main-header'); if (header) { let lastScroll = 0; window.addEventListener('scroll', () => { const currentScroll = window.pageYOffset; if (currentScroll <= 0) { header.classList.remove('scroll-up'); return; } if (currentScroll > lastScroll && !header.classList.contains('scroll-down')) { header.classList.remove('scroll-up'); header.classList.add('scroll-down'); } else if (currentScroll < lastScroll && header.classList.contains('scroll-down')) { header.classList.remove('scroll-down'); header.classList.add('scroll-up'); } lastScroll = currentScroll; if (currentScroll > 50) { header.classList.add('scrolled'); } else { header.classList.remove('scrolled'); } }); } const mobileMenuToggle = document.querySelector('.mobile-menu-toggle'); const mobileMenu = document.querySelector('.mobile-menu'); if (mobileMenuToggle && mobileMenu) { mobileMenuToggle.addEventListener('click', () => { mobileMenuToggle.classList.toggle('active'); mobileMenu.classList.toggle('active'); document.body.classList.toggle('mobile-menu-open'); }); } const backToTopButton = document.querySelector('.back-to-top'); if (backToTopButton) { window.addEventListener('scroll', () => { if (window.pageYOffset > 300) { backToTopButton.classList.add('show'); } else { backToTopButton.classList.remove('show'); } }); backToTopButton.addEventListener('click', (e) => { e.preventDefault(); window.scrollTo({ top: 0, behavior: 'smooth' }); }); } initPropertyGallery(); initPropertyFiltering(); initNewsletterForm(); }); function toggleFavorite(propertyId, event) { if (event) event.stopPropagation(); const heartIcon = event ? event.currentTarget.querySelector('i') : null; const isFavorite = heartIcon ? heartIcon.classList.contains('fas') : false; if (heartIcon) { heartIcon.classList.toggle('far'); heartIcon.classList.toggle('fas'); heartIcon.classList.toggle('text-danger'); heartIcon.classList.add('animate__animated', 'animate__heartBeat'); setTimeout(() => { heartIcon.classList.remove('animate__animated', 'animate__heartBeat'); }, 1000); } fetch('api/toggle-favorite.php', { method: 'POST', headers: { 'Content-Type': 'application/json', }, body: JSON.stringify({ property_id: propertyId, is_favorite: !isFavorite }) }) .then(response => response.json()) .then(data => { if (data.success) { showToast( isFavorite ? 'Removed from favorites' : 'Added to favorites', 'success' ); const favoriteCount = document.getElementById('favorite-count'); if (favoriteCount) { const currentCount = parseInt(favoriteCount.textContent) || 0; favoriteCount.textContent = isFavorite ? currentCount - 1 : currentCount + 1; } } else { if (heartIcon) { heartIcon.classList.toggle('far'); heartIcon.classList.toggle('fas'); heartIcon.classList.toggle('text-danger'); } showToast(data.message || 'An error occurred', 'error'); } }) .catch(error => { console.error('Error:', error); if (heartIcon) { heartIcon.classList.toggle('far'); heartIcon.classList.toggle('fas'); heartIcon.classList.toggle('text-danger'); } showToast('Failed to update favorites. Please try again.', 'error'); }); } function shareProperty(propertyId, title = '', text = '') { const shareData = { title: title || 'Check out this property', text: text || 'I found this amazing property on APS Dream Home!', url: `${window.location.origin}/property_details.php?id=${propertyId}`, }; if (navigator.share) { navigator.share(shareData) .then(() => { showToast('Shared successfully!', 'success'); }) .catch((error) => { console.log('Error sharing:', error); showToast('Failed to share. Please try again.', 'error'); }); } else { const url = shareData.url; const shareText = `${shareData.title}\n${shareData.text}\n\n${url}`; if (navigator.clipboard) { navigator.clipboard.writeText(shareText) .then(() => { showToast('Link copied to clipboard!', 'success'); }) .catch(() => { prompt('Copy this link to share:', url); }); } else { prompt('Copy this link to share:', url); } } } function scheduleVisit(propertyId, propertyTitle = '') { let modal = document.getElementById('scheduleVisitModal'); if (!modal) { modal = document.createElement('div'); modal.className = 'modal fade'; modal.id = 'scheduleVisitModal'; modal.setAttribute('tabindex', '-1'); modal.setAttribute('aria-hidden', 'true'); const modalHTML = ` <div class="modal-dialog modal-dialog-centered"> <div class="modal-content"> <div class="modal-header"> <h5 class="modal-title">Schedule a Visit</h5> <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button> </div> <div class="modal-body"> <form id="visitForm" novalidate> <input type="hidden" name="property_id" value="${propertyId}"> ${propertyTitle ? ` <div class="mb-3"> <label class="form-label">Property</label> <p class="fw-semibold">${propertyTitle}</p> </div>` : ''} <div class="mb-3"> <label for="visitDate" class="form-label">Preferred Date <span class="text-danger">*</span></label> <input type="date" class="form-control" id="visitDate" name="visit_date" required> <div class="invalid-feedback">Please select a date</div> </div> <div class="mb-3"> <label for="visitTime" class="form-label">Preferred Time <span class="text-danger">*</span></label> <select class="form-select" id="visitTime" name="visit_time" required> <option value="" selected disabled>Select time</option> <option value="09:00">09:00 AM</option> <option value="10:00">10:00 AM</option> <option value="11:00">11:00 AM</option> <option value="12:00">12:00 PM</option> <option value="13:00">01:00 PM</option> <option value="14:00">02:00 PM</option> <option value="15:00">03:00 PM</option> <option value="16:00">04:00 PM</option> <option value="17:00">05:00 PM</option> </select> <div class="invalid-feedback">Please select a time</div> </div> <div class="mb-3"> <label for="name" class="form-label">Your Name <span class="text-danger">*</span></label> <input type="text" class="form-control" id="name" name="name" required> <div class="invalid-feedback">Please enter your name</div> </div> <div class="mb-3"> <label for="email" class="form-label">Email Address <span class="text-danger">*</span></label> <input type="email" class="form-control" id="email" name="email" required> <div class="invalid-feedback">Please enter a valid email</div> </div> <div class="mb-3"> <label for="phone" class="form-label">Phone Number <span class="text-danger">*</span></label> <input type="tel" class="form-control" id="phone" name="phone" required> <div class="invalid-feedback">Please enter your phone number</div> </div> <div class="mb-3"> <label for="message" class="form-label">Additional Notes</label> <textarea class="form-control" id="message" name="message" rows="3"></textarea> </div> <div class="d-grid gap-2"> <button type="submit" class="btn btn-primary"> <span class="spinner-border spinner-border-sm d-none" role="status" aria-hidden="true"></span> <span class="btn-text">Schedule Visit</span> </button> </div> </form> </div> </div> </div> `; modal.innerHTML = modalHTML; document.body.appendChild(modal); const bsModal = new bootstrap.Modal(modal); const form = modal.querySelector('#visitForm'); if (form) { form.addEventListener('submit', function(e) { e.preventDefault(); submitVisitRequest(form); }); } bsModal.show(); const today = new Date().toISOString().split('T')[0]; const dateInput = modal.querySelector('#visitDate'); if (dateInput) { dateInput.min = today; const tomorrow = new Date(); tomorrow.setDate(tomorrow.getDate() + 1); dateInput.valueAsDate = tomorrow; } const phoneInput = modal.querySelector('#phone'); if (phoneInput) { phoneInput.addEventListener('input', function(e) { let x = e.target.value.replace(/\D/g, '').match(/(\d{0,3})(\d{0,3})(\d{0,4})/); e.target.value = !x[2] ? x[1] : `(${x[1]}) ${x[2]}${x[3] ? `-${x[3]}` : ''}`; }); } } else { const propertyIdInput = modal.querySelector('input[name="property_id"]'); if (propertyIdInput) { propertyIdInput.value = propertyId; } if (propertyTitle) { const propertyTitleEl = modal.querySelector('.modal-body p'); if (propertyTitleEl) { propertyTitleEl.textContent = propertyTitle; } } const bsModal = new bootstrap.Modal(modal); bsModal.show(); } } function submitVisitRequest(form) { if (!form) return; if (!form.checkValidity()) { form.classList.add('was-validated'); return; } const formData = new FormData(form); const submitButton = form.querySelector('button[type="submit"]'); const spinner = submitButton ? submitButton.querySelector('.spinner-border') : null; const buttonText = submitButton ? submitButton.querySelector('.btn-text') : null; if (spinner && buttonText) { spinner.classList.remove('d-none'); buttonText.textContent = 'Scheduling...'; } if (submitButton) { submitButton.disabled = true; } const jsonData = {}; formData.forEach((value, key) => { jsonData[key] = value; }); setTimeout(() => { console.log('Submitting visit request:', jsonData); const success = Math.random() > 0.2; if (success) { showToast('Visit scheduled successfully! Our agent will contact you soon.', 'success'); const modal = bootstrap.Modal.getInstance(form.closest('.modal')); if (modal) { modal.hide(); } form.reset(); form.classList.remove('was-validated'); } else { showToast('Failed to schedule visit. Please try again later.', 'error'); } if (spinner && buttonText && submitButton) { spinner.classList.add('d-none'); buttonText.textContent = 'Schedule Visit'; submitButton.disabled = false; } }, 1500); } function initPropertyGallery() { const gallery = document.querySelector('.property-gallery'); if (!gallery) return; const mainImage = gallery.querySelector('.gallery-main-img'); const thumbnails = gallery.querySelectorAll('.gallery-thumbnail'); if (thumbnails.length > 0) { thumbnails.forEach(thumb => { thumb.addEventListener('click', function(e) { e.preventDefault(); thumbnails.forEach(t => t.classList.remove('active')); this.classList.add('active'); if (mainImage) { mainImage.src = this.href || this.dataset.image; mainImage.alt = this.title || 'Property Image'; mainImage.style.opacity = '0'; setTimeout(() => { mainImage.style.opacity = '1'; mainImage.style.transition = 'opacity 0.3s ease'; }, 100); } }); }); } if (typeof lightbox !== 'undefined') { lightbox.option({ 'resizeDuration': 200, 'wrapAround': true, 'showImageNumberLabel': false, 'disableScrolling': true, 'albumLabel': 'Image %1 of %2' }); } } function initPropertyFiltering() { const filterForm = document.getElementById('propertyFilterForm'); if (!filterForm) return; const priceRange = document.getElementById('priceRange'); const priceValue = document.getElementById('priceValue'); if (priceRange && priceValue) { priceValue.textContent = formatCurrency(priceRange.value); priceRange.addEventListener('input', function() { priceValue.textContent = formatCurrency(this.value); }); } const resetButton = filterForm.querySelector('.btn-reset'); if (resetButton) { resetButton.addEventListener('click', function(e) { e.preventDefault(); filterForm.reset(); if (priceValue) priceValue.textContent = formatCurrency(priceRange.value); updatePropertyResults(); }); } const filterInputs = filterForm.querySelectorAll('select, input[type="range"]'); filterInputs.forEach(input => { input.addEventListener('change', function() { updatePropertyResults(); }); }); } function updatePropertyResults() { const filterForm = document.getElementById('propertyFilterForm'); if (!filterForm) return; const resultsContainer = document.getElementById('propertyResults'); if (resultsContainer) { resultsContainer.innerHTML = '<div class="text-center py-5"><div class="spinner-border text-primary" role="status"><span class="visually-hidden">Loading...</span></div></div>'; } const formData = new FormData(filterForm); const searchParams = new URLSearchParams(); for (const [key, value] of formData.entries()) { if (value) searchParams.append(key, value); } setTimeout(() => { console.log('Updating property results with filters:', Object.fromEntries(searchParams.entries())); const filteredProperties = []; renderPropertyResults(filteredProperties); }, 800); } function renderPropertyResults(properties) { const resultsContainer = document.getElementById('propertyResults'); if (!resultsContainer) return; if (!properties || properties.length === 0) { resultsContainer.innerHTML = ` <div class="col-12 text-center py-5"> <i class="fas fa-search fa-3x text-muted mb-3"></i> <h4>No properties found</h4> <p class="text-muted">Try adjusting your search or filter criteria</p> <button class="btn btn-outline-primary mt-2 btn-reset">Reset Filters</button> </div> `; return; } let html = ''; properties.forEach(property => { html += ` <div class="col-md-6 col-lg-4 mb-4"> <div class="property-card h-100"> <div class="property-image-container"> <img src="${property.image || 'assets/images/placeholder.jpg'}" alt="${property.title || 'Property'}" class="property-image"> <div class="property-badges"> <span class="badge badge-status">${property.status || 'For Sale'}</span> <span class="badge badge-type">${property.type || 'Apartment'}</span> </div> <div class="property-actions"> <button class="btn btn-icon" onclick="toggleFavorite('${property.id}', event)"> <i class="${property.isFavorite ? 'fas' : 'far'} fa-heart"></i> </button> <button class="btn btn-icon" onclick="shareProperty('${property.id}', '${property.title}')"> <i class="fas fa-share-alt"></i> </button> </div> </div> <div class="property-content"> <h3 class="property-title"> <a href="property-details.php?id=${property.id}">${property.title || 'Luxury Property'}</a> </h3> <div class="property-location"> <i class="fas fa-map-marker-alt"></i> <span>${property.location || 'Location not specified'}</span> </div> <div class="property-features"> <div class="feature"> <i class="fas fa-bed"></i> <span>${property.bedrooms || 0} Beds</span> </div> <div class="feature"> <i class="fas fa-bath"></i> <span>${property.bathrooms || 0} Baths</span> </div> <div class="feature"> <i class="fas fa-ruler-combined"></i> <span>${property.area || 0} sqft</span> </div> </div> <div class="property-footer"> <div class="property-price"> $${(property.price || 0).toLocaleString()} <span class="price-per-unit">$${(property.price_per_sqft || 0).toLocaleString()}/sqft</span> </div> <button class="btn btn-sm btn-outline-primary" onclick="scheduleVisit('${property.id}', '${property.title}')"> Schedule Visit </button> </div> </div> </div> </div> `; }); resultsContainer.innerHTML = html; } function initNewsletterForm() { const newsletterForm = document.getElementById('newsletterForm'); if (!newsletterForm) return; newsletterForm.addEventListener('submit', function(e) { e.preventDefault(); const emailInput = this.querySelector('input[type="email"]'); const submitButton = this.querySelector('button[type="submit"]'); const buttonText = submitButton ? submitButton.querySelector('.btn-text') : null; const spinner = submitButton ? submitButton.querySelector('.spinner-border') : null; if (!emailInput.value || !isValidEmail(emailInput.value)) { emailInput.classList.add('is-invalid'); return; } if (buttonText && spinner) { buttonText.textContent = 'Subscribing...'; spinner.classList.remove('d-none'); } if (submitButton) { submitButton.disabled = true; } setTimeout(() => { console.log('Subscribing email:', emailInput.value); showToast('Thank you for subscribing to our newsletter!', 'success'); this.reset(); if (buttonText && spinner) { buttonText.textContent = 'Subscribe'; spinner.classList.add('d-none'); } if (submitButton) { submitButton.disabled = false; } }, 1500); }); const emailInput = newsletterForm.querySelector('input[type="email"]'); if (emailInput) { emailInput.addEventListener('input', function() { if (this.value && !isValidEmail(this.value)) { this.classList.add('is-invalid'); } else { this.classList.remove('is-invalid'); } }); } } function showToast(message, type = 'info') { let toastContainer = document.getElementById('toast-container'); if (!toastContainer) { toastContainer = document.createElement('div'); toastContainer.id = 'toast-container'; toastContainer.style.position = 'fixed'; toastContainer.style.top = '20px'; toastContainer.style.right = '20px'; toastContainer.style.zIndex = '9999'; document.body.appendChild(toastContainer); } const toast = document.createElement('div'); toast.className = `toast align-items-center text-white bg-${type} border-0 fade show`; toast.role = 'alert'; toast.setAttribute('aria-live', 'assertive'); toast.setAttribute('aria-atomic', 'true'); let icon = ''; switch (type) { case 'success': icon = 'check-circle'; break; case 'error': icon = 'exclamation-circle'; break; case 'warning': icon = 'exclamation-triangle'; break; case 'info': default: icon = 'info-circle'; } toast.innerHTML = ` <div class="d-flex"> <div class="toast-body d-flex align-items-center"> <i class="fas fa-${icon} me-2"></i> ${message} </div> <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button> </div> `; toastContainer.appendChild(toast); const bsToast = new bootstrap.Toast(toast, { animation: true, autohide: true, delay: 5000 }); bsToast.show(); toast.addEventListener('hidden.bs.toast', function() { toast.remove(); }); } function formatCurrency(amount) { return new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD', maximumFractionDigits: 0 }).format(amount); } function isValidEmail(email) { const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/; return re.test(String(email).toLowerCase()); } </select> </div> <div class="mb-3"> <label for="visitNotes" class="form-label">Additional Notes</label> <textarea class="form-control" id="visitNotes" rows="3"></textarea> </div> </form> </div> <div class="modal-footer"> <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button> <button type="button" class="btn btn-primary" id="submitVisitBtn"> <i class="fas fa-calendar-check me-2"></i>Schedule Visit </button> </div> </div> </div>`; document.body.appendChild(modal); const visitModal = new bootstrap.Modal(modal); visitModal.show(); modal.querySelector('#submitVisitBtn').addEventListener('click', function() { submitVisitRequest(propertyId); }); modal.addEventListener('hidden.bs.modal', function () { document.body.removeChild(modal); }); } function submitVisitRequest(propertyId) { const form = document.getElementById('visitForm'); if (!form.checkValidity()) { form.reportValidity(); return; } const formData = { propertyId: propertyId, date: document.getElementById('visitDate').value, time: document.getElementById('visitTime').value, notes: document.getElementById('visitNotes').value }; console.log('Submitting visit request:', formData); const modal = bootstrap.Modal.getInstance(document.getElementById('scheduleVisitModal')); modal.hide(); alert('Your visit has been scheduled! We will contact you shortly to confirm the details.'); } document.addEventListener('DOMContentLoaded', function() { if (typeof AOS !== 'undefined') { AOS.init({ duration: 800, easing: 'ease-in-out', once: true }); } if (typeof Swiper !== 'undefined' && document.querySelector('.swiper')) { new Swiper('.swiper', { loop: true, autoplay: { delay: 5000, disableOnInteraction: false, }, pagination: { el: '.swiper-pagination', clickable: true, }, }); } if (typeof LazyLoad !== 'undefined') { new LazyLoad({ elements_selector: '.lazy' }); } });

